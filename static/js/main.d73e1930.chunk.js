(this["webpackJsonpra9-2"]=this["webpackJsonpra9-2"]||[]).push([[0],{19:function(e,t,a){e.exports=a(33)},24:function(e,t,a){},25:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(15),o=a.n(s),r=(a(24),a(25),a(5)),l=a(1),m=a(2),u=Object(n.createContext)([]);function i(e){var t=e.url,a=Object(n.useState)(!1),s=Object(m.a)(a,2),o=s[0],r=s[1],l=Object(n.useState)([]),i=Object(m.a)(l,2),p=i[0],d=i[1];return c.a.createElement(u.Provider,{value:{advanced:o,setAdvanced:r,posts:p,setPosts:d,url:t}},e.children)}var p=a(7),d=a.n(p),E=a(9),b=a.n(E),f=a(16);function v(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),o=Object(m.a)(s,2),r=o[0],l=o[1],u=Object(n.useState)(!1),i=Object(m.a)(u,2),p=i[0],d=i[1];return Object(n.useEffect)((function(){a&&function(){var e=Object(f.a)(b.a.mark((function e(){var t,n,c,s,o,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,t=a.url,n=a.method,c=a.headers,s=a.body,e.next=5,fetch(t,{method:n,headers:c,body:s});case 5:if((o=e.sent).ok||(console.log(o.status,o.body),setError(o.statusText)),204!==o.status){e.next=11;break}l({resolve:"",status:o.status}),e.next=16;break;case 11:return e.next=13,o.json();case 13:r=e.sent,console.log(r),l({resolve:r,status:o.status});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:return e.prev=21,d(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24]])})));return function(){return e.apply(this,arguments)}}()(),console.log(r)}),[a]),[a,c,r,p]}function h(e){var t=Object(n.useContext)(u),a=(t.advanced,t.setAdvanced,t.url),s=(t.posts,t.setPosts),o=v(),l=Object(m.a)(o,3),i=(l[0],l[1]),p=l[2];return Object(n.useEffect)((function(){p||i({url:"".concat(a,"posts"),method:"GET"}),p&&s(p.resolve)}),[p]),c.a.createElement("div",null,c.a.createElement("div",{className:"main-top"},c.a.createElement(r.b,{to:"/posts/new",className:"button"},"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")),p&&p.resolve.map((function(e){return c.a.createElement(r.b,{to:"/posts/".concat(e.id)},c.a.createElement("div",{className:"item-post",key:e.id},c.a.createElement("div",{className:"item-post-header"},c.a.createElement("div",{className:"item-post-name"},c.a.createElement("span",{className:"name"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"),c.a.createElement("span",{className:"time"},d()(e.created).fromNow()))),c.a.createElement("div",{className:"item-post-content"},c.a.createElement("p",null,e.content)),c.a.createElement("div",null,c.a.createElement("span",{className:"item-post-info"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u0432\u043d\u0443\u0442\u0440\u0438"))))})))}function O(e){var t=Object(n.useContext)(u),a=(t.posts,t.setPosts,t.url),s=Object(n.useState)(),o=Object(m.a)(s,2),r=o[0],l=o[1],i=v(),p=Object(m.a)(i,4),d=(p[0],p[1]),E=p[2],b=(p[3],e.history);return Object(n.useEffect)((function(){E&&b.goBack()}),[E]),c.a.createElement("div",{className:"new-post"},c.a.createElement("div",{className:"top"},c.a.createElement("span",{onClick:function(){b.goBack()}},"\u2716")),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d({url:"".concat(a,"posts"),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:0,content:r})})}},c.a.createElement("textarea",{name:"text",onChange:function(e){l(e.target.value)},value:r}),c.a.createElement("div",{className:"submit"},c.a.createElement("button",{type:"submit",className:"button"},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"))))}function j(e){var t=e.match,a=e.history,s=Object(n.useContext)(u),o=s.posts,l=s.url,i=v(),p=Object(m.a)(i,4),E=(p[0],p[1]),b=p[2],f=(p[3],Number(t.params.id)),h=o.find((function(e){return e.id===f}));return Object(n.useEffect)((function(){b&&a.goBack()}),[b]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"item-post",key:h.id},c.a.createElement(r.b,{to:"/",className:"link-back"},"\u041d\u0430\u0437\u0430\u0434"),c.a.createElement("div",{className:"item-post-header"},c.a.createElement("div",null,c.a.createElement("p",{className:"name"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"),c.a.createElement("span",{className:"time"},d()(h.created).fromNow()))),c.a.createElement("div",{className:"item-post-content"},c.a.createElement("p",null,h.content)),c.a.createElement("div",{className:"item-post-footer"},c.a.createElement("button",{className:"change button",onClick:function(){a.push("/posts/change/".concat(f))}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),c.a.createElement("button",{className:"remove button",onClick:function(){E({url:"".concat(l,"posts/").concat(f),method:"DELETE"})}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))}var N=a(18);function g(e){var t=e.match,a=e.history,s=Object(n.useContext)(u),o=s.posts,r=s.setPosts,l=s.url,i=Object(n.useState)(),p=Object(m.a)(i,2),d=p[0],E=p[1],b=v(),f=Object(m.a)(b,4),h=(f[0],f[1]),O=f[2],j=(f[3],Number(t.params.id));return Object(n.useEffect)((function(){var e=o.find((function(e){return e.id===j}));E(e.content),O&&(r((function(e){return e.map((function(e){return e.id===j?Object(N.a)({},e,{content:d}):e}))})),a.goBack())}),[O]),c.a.createElement("div",{className:"change-post"},c.a.createElement("p",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),c.a.createElement("div",{className:"top"},c.a.createElement("span",{className:"close",onClick:function(){a.goBack()}},"\u2716")),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h({url:"".concat(l,"posts"),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:j,content:d})})}},c.a.createElement("textarea",{name:"text",onChange:function(e){E(e.target.value)},value:d}),c.a.createElement("div",{className:"submit"},c.a.createElement("button",{type:"submit",className:"button"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))}var k=function(){return c.a.createElement(i,{url:"http://localhost:7777/"},c.a.createElement(r.a,null,c.a.createElement("div",null,c.a.createElement(l.c,null,c.a.createElement(l.a,{path:"/posts/new",component:O}),c.a.createElement(l.a,{path:"/posts/change/:id",component:g}),c.a.createElement(l.a,{path:"/posts/:id",component:j}),c.a.createElement(l.a,{path:"/",component:h})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.d73e1930.chunk.js.map